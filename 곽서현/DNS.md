# DNS (Domain Name System) 정리-

## 📌 1. DNS란?

- DNS는 **도메인 이름을 IP 주소로 변환**하는 시스템이다.
- 사용자는 `www.naver.com`처럼 사람이 읽기 쉬운 이름을 사용하고,
  컴퓨터는 `223.130.200.104` 같은 IP 주소로 통신함.
- DNS는 이 둘을 연결해주는 **인터넷의 전화번호부** 역할을 함.
- 전 세계적으로 **계층적이고 분산된 구조**로 구성되어 있다.

---

## 🌐 2. DNS의 계층 구조

| 계층 | 설명 |
|------|------|
| **Root Name Server** | 최상위 DNS 서버. `.com`, `.net`, `.kr` 등의 TLD 서버 주소를 알려줌 |
| **TLD Server** | `.com`, `.org`, `.kr` 등 최상위 도메인의 네임서버 |
| **Authoritative Name Server** | 실제 IP 주소를 응답하는 도메인 최종 책임 서버 |
| **Recursive Resolver** | 클라이언트 요청을 받아 위 과정을 거쳐 IP 주소를 찾아오는 역할 (예: 8.8.8.8) |

---

## 🔄 3. DNS 질의 방식

| 방식 | 재귀적 질의 (Recursive) | 반복적 질의 (Iterative) |
|------|--------------------------|---------------------------|
| 요청 주체 | 클라이언트 → 로컬 DNS | 로컬 DNS → Root/TLD 서버 등 |
| 응답 방식 | 최종 IP 주소까지 찾아서 응답 | 다음 질의할 서버만 안내 |
| 특징 | 대신 끝까지 처리함 | 힌트만 주고 떠넘김 |

---

## 🧠 4. DNS 캐시 & TTL

- **DNS 캐시**는 브라우저, OS, ISP DNS 서버 등 다양한 계층에 존재
- **TTL (Time To Live)**: 캐시된 정보의 유효 시간 (초 단위)
  - TTL이 너무 길면 IP 변경이 반영되지 않음
  - TTL이 너무 짧으면 DNS 서버에 부하 증가

---

## 📄 5. 주요 레코드 타입

| 레코드 | 설명 |
|--------|------|
| **A** | 도메인 → IPv4 주소 |
| **AAAA** | 도메인 → IPv6 주소 |
| **CNAME** | 도메인의 별칭 (Alias) 지정 |
| **MX** | 메일 서버 지정 |
| **NS** | 권한 네임서버 정보 |
| **TXT** | SPF, 인증 정보 등 기타 텍스트 |

---

## 💬 면접 예상 질문 (난이도 포함)

### Q1. DNS는 어떻게 장애에 대비하나요? 

- 네임서버는 전 세계적으로 **분산**되어 있음 (루트 서버만 해도 수백 개)
- 클라이언트는 **여러 DNS 서버**(8.8.8.8 등) 설정 가능
- **TTL 기반 캐시** 덕분에 네임서버 다운 시에도 일정 시간 서비스 유지 가능

---

### Q2. CDN과 DNS는 어떻게 연동되나요? 

- **GEO-DNS** 기능을 활용해 사용자 위치 기반으로 가장 가까운 CDN 서버 IP 반환
- DNS 서버가 위치 정보 기반으로 **다른 결과 응답**
- 예: `www.netflix.com` → 한국 사용자에게는 서울 CDN으로 연결

---

### Q3. 서브도메인이 많아지면 DNS 질의에 어떤 영향을 미치나요? 

- 예: `a.b.c.example.com`
- DNS는 오른쪽부터 차례로 질의함 (`example.com` → `c.example.com` → ...)
- 최종 권한 네임서버가 하위 도메인 정보까지 보유해야 하므로 **구조 복잡도 증가**

---

### Q4. TTL 값이 너무 크거나 작을 때의 문제는? 

- **너무 크면**: IP 주소 변경 시 오래 반영되지 않아 접속 오류 발생
- **너무 작으면**: 매번 전체 질의 과정 필요 → **응답 지연 & DNS 서버 부하**
- **실무 팁**: 배포 전 TTL을 낮추고, 안정화 후 다시 높이기

---

## ✅ 핵심 요약 복습용

- **DNS = 도메인 → IP 변환 시스템**
- **계층적 구조**: Root → TLD → Authoritative
- **질의 방식**: 재귀(사용자 ↔ DNS), 반복(DNS ↔ 상위 DNS)
- **캐시 + TTL**: 성능 최적화의 핵심
- **레코드 타입 숙지**: A, CNAME, MX, NS, TXT 등
